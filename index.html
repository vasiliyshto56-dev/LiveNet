<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>LiveNet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>

  <h1 id="title">LiveNet –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</h1>

  <!-- Supabase SDK (–û–î–ò–ù –†–ê–ó) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    // Supabase config
    const SUPABASE_URL = "https://mqcakdxhkwugckvuqygs.supabase.co";
    const SUPABASE_KEY = "sb_publishable_h-EbNY3-ziEUt_i4PmQ1gw_cmzSR2OH";

    // –í–ê–ñ–ù–û: –ù–ï –Ω–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é supabase
    const supabaseClient = supabase.createClient(
      SUPABASE_URL,
      SUPABASE_KEY
    );

    // –ó–∞–≥—Ä—É–∑–∫–∞ title –∏–∑ Supabase
    async function loadTitle() {
      const { data, error } = await supabaseClient
        .from("site_settings")
        .select("title")
        .limit(1)
        .single();

      if (error) {
        console.error("Supabase error:", error);
        document.getElementById("title").innerText = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏";
        return;
      }

      document.getElementById("title").innerText = data.title;
    }

    loadTitle();
  </script>

</body>
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LiveNet</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700;900&display=swap');
    * { font-family: Poppins, system-ui; }
    .hide { display: none !important; }
  </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-purple-800 to-purple-900 text-white min-h-screen">
  
  <!-- Home View -->
  <div id="homeView">
    <div class="h-screen flex flex-col items-center justify-center px-8 relative">
      <button onclick="openPasswordModal()" class="absolute top-6 right-8 text-4xl hover:scale-110 transition">
        ‚öôÔ∏è
      </button>

      <h1 class="text-8xl font-black mb-6 text-center bg-gradient-to-r from-pink-400 via-purple-400 to-pink-300 bg-clip-text text-transparent drop-shadow-lg">
        LiveNet
      </h1>

      <p class="text-purple-200 text-xl mb-16 text-center max-w-lg font-light">
        –í—ã–¥—É–º–∞–Ω–Ω—ã–π —Ç–µ–ª–µ–∫–∞–Ω–∞–ª –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö —Ñ–∞–Ω–∞—Ç–æ–≤
      </p>

      <div class="flex gap-4 flex-col w-full max-w-sm items-center">
        <button onclick="showView('player')" class="px-8 py-4 bg-gradient-to-r from-pink-500 to-pink-600 text-white font-bold rounded-2xl hover:shadow-2xl hover:shadow-pink-500/60 transition transform hover:scale-105 text-lg shadow-lg">
          ‚ñ∂ –°–ú–û–¢–†–ï–¢–¨ –°–¢–†–ò–ú
        </button>
        <a href="https://t.me/livenet_official" target="_blank" rel="noopener noreferrer" class="px-8 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold rounded-2xl hover:shadow-2xl hover:shadow-blue-500/60 transition transform hover:scale-105 text-center text-lg flex items-center justify-center gap-2 shadow-lg w-full">
          üí¨ –¢–ï–õ–ï–ì–†–ê–ú –ö–ê–ù–ê–õ
        </a>
      </div>

      <button id="adminPanelBtn" onclick="showView('admin')" class="mt-8 px-6 py-2 bg-gradient-to-r from-purple-700 to-pink-700 text-white text-sm rounded-lg hover:shadow-lg transition shadow-md font-semibold hide">
        –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
      </button>

      <div class="absolute bottom-0 w-full text-center py-6 text-purple-300/70 text-sm border-t border-purple-700/50">
        ¬© 2026 LiveNet. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
      </div>
    </div>
  </div>

  <!-- Player View -->
  <div id="playerView" class="hide h-screen bg-gradient-to-br from-purple-900 via-purple-800 to-purple-900 text-white flex flex-col overflow-hidden">
    <!-- Header -->
    <div class="flex justify-between items-center px-6 py-4 border-b border-purple-700/50 shadow-lg">
      <button onclick="showView('home')" class="flex items-center gap-2 text-purple-300 hover:text-white transition shadow-md hover:shadow-lg rounded-lg p-2">
        ‚óÑ –ù–∞–∑–∞–¥
      </button>
      <div class="w-8"></div>
    </div>

    <!-- Main Content -->
    <div class="flex flex-1 overflow-hidden gap-4 p-4">
      <!-- Left Side - Player Window -->
      <div class="flex-1 bg-purple-950 rounded-2xl border-2 border-blue-400 overflow-hidden relative shadow-2xl flex items-center justify-center">
        <!-- Connection Loading State -->
        <div id="connectingState" class="hide flex flex-col items-center justify-center gap-6 absolute inset-0 bg-purple-950/80 z-30">
          <div class="relative w-40 h-40">
            <div class="absolute inset-0 bg-gradient-to-br from-pink-500/20 to-purple-500/20 rounded-full flex items-center justify-center border-2 border-pink-400/50 shadow-2xl animate-pulse">
              <span class="text-8xl">‚Üª</span>
            </div>
            <div class="absolute inset-0 rounded-full animate-spin" style="border-top: 4px solid #ec4899; border-right: 4px solid transparent;"></div>
          </div>
          <p class="text-2xl font-bold text-pink-400 animate-pulse">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</p>
        </div>

        <!-- Off Air State -->
        <div id="offlineState" class="hide flex flex-col items-center justify-center gap-6 px-8 text-center absolute inset-0 bg-purple-950/80 z-30">
          <div class="text-8xl animate-bounce">üò¢</div>
          <div>
            <h2 class="text-3xl font-bold text-pink-400">–ú—ã –Ω–µ –≤ —ç—Ñ–∏—Ä–µ :(</h2>
          </div>
        </div>

        <!-- Disconnecting State -->
        <div id="disconnectingState" class="hide flex flex-col items-center justify-center gap-6 absolute inset-0 bg-purple-950/80 z-30">
          <div class="relative w-40 h-40">
            <div class="absolute inset-0 bg-gradient-to-br from-red-500/20 to-purple-500/20 rounded-full flex items-center justify-center border-2 border-red-400/50 shadow-2xl animate-pulse">
              <span class="text-8xl">‚äó</span>
            </div>
            <div class="absolute inset-0 rounded-full animate-spin" style="border-top: 4px solid #ef4444; border-right: 4px solid transparent;"></div>
          </div>
          <p class="text-2xl font-bold text-red-400 animate-pulse">–û—Ç—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç —ç—Ñ–∏—Ä–∞...</p>
        </div>

        <!-- Normal Live State -->
        <div id="liveState" class="w-full h-full flex flex-col items-center justify-center">
          <iframe id="streamIframe" class="w-full h-full" src="https://your-stream-url.com/embed" frameborder="0" allow="autoplay; fullscreen" allowfullscreen style="display: none;"></iframe>
          <div id="playButton" class="w-32 h-32 bg-gradient-to-br from-pink-500/20 to-purple-500/20 rounded-full flex items-center justify-center border-2 border-pink-400/50 shadow-2xl cursor-pointer hover:scale-110 transition" onclick="handlePlayButtonClick()">
            <span class="text-7xl">‚ñ∂</span>
          </div>
        </div>
      </div>

      <!-- Right Side - Info Panel -->
      <div id="sidebar" class="w-72 bg-purple-900/50 border border-purple-700/50 rounded-2xl flex flex-col shadow-2xl overflow-hidden">
        <!-- Status Section -->
        <div class="p-4 border-b border-purple-700/50">
          <div class="mb-4">
            <div class="flex items-center gap-2 mb-2">
              <div id="statusDot" class="w-2 h-2 bg-gray-500 rounded-full"></div>
              <p id="statusText" class="text-xs font-bold text-gray-400">–í–ù–ï –≠–§–ò–†–ê</p>
            </div>
            <h2 id="streamNameDisplay" class="text-lg font-bold text-white">–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä</h2>
          </div>

          <div class="flex gap-2">
            <button onclick="handleLike()" class="flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg transition bg-purple-800 text-purple-300 hover:bg-purple-700 text-sm font-semibold" id="likeBtn">
              üëç <span id="likeCount">0</span>
            </button>
            <button onclick="handleDislike()" class="flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg transition bg-purple-800 text-purple-300 hover:bg-purple-700 text-sm font-semibold" id="dislikeBtn">
              üëé <span id="dislikeCount">0</span>
            </button>
          </div>
        </div>

        <!-- Schedule Section -->
        <div class="flex-1 overflow-y-auto p-4">
          <h3 class="font-bold text-sm mb-3 text-purple-300">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h3>
          <div id="scheduleContainer" class="space-y-2">
            <p class="text-purple-400 text-xs">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Admin View -->
  <div id="adminView" class="hide min-h-screen bg-gradient-to-br from-purple-900 via-purple-800 to-purple-900 text-white p-8">
    <div class="flex justify-between items-center mb-8">
      <h1 class="text-4xl font-bold">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
      <div class="flex gap-3">
        <button onclick="showView('home')" class="flex items-center gap-2 px-6 py-2 bg-purple-700 hover:bg-purple-600 rounded-lg font-bold transition shadow-lg">
          ‚óÑ –í—ã–π—Ç–∏ –≤ –º–µ–Ω—é
        </button>
        <button onclick="adminLogout()" class="flex items-center gap-2 px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-bold transition shadow-lg">
          ‚äó –í—ã–π—Ç–∏
        </button>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl">
      <div class="bg-purple-800/50 rounded-2xl p-8 border border-purple-700/50 shadow-xl">
        <h2 class="text-2xl font-bold mb-6 text-pink-400">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–µ–π</h2>
        <div class="space-y-6">
          <div>
            <label class="block text-sm font-semibold mb-3 text-purple-300">–°—Ç–∞—Ç—É—Å —ç—Ñ–∏—Ä–∞</label>
            <button onclick="toggleLive()" id="liveToggleBtn" class="w-full py-4 rounded-lg font-bold transition shadow-lg text-lg bg-purple-700 hover:bg-purple-600 text-purple-300">
              ‚ö™ –ó–ê–ü–£–°–¢–ò–¢–¨ –≠–§–ò–†
            </button>
          </div>
        </div>
      </div>

      <div class="bg-purple-800/50 rounded-2xl p-8 border border-purple-700/50 shadow-xl">
        <h2 class="text-2xl font-bold mb-6 text-pink-400">–ù–∞–∑–≤–∞–Ω–∏–µ —ç—Ñ–∏—Ä–∞</h2>
        <input type="text" id="streamNameInput" class="w-full bg-purple-900 border border-pink-500/30 rounded-lg px-4 py-3 text-white placeholder-purple-400 focus:outline-none focus:border-pink-500 transition mb-4 shadow-md" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —ç—Ñ–∏—Ä–∞">
        <button onclick="saveStreamName()" class="w-full py-3 bg-pink-500 hover:bg-pink-600 rounded-lg font-bold transition shadow-lg text-white mb-3">
          üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ
        </button>
        <p class="text-purple-300 text-sm">–ù–∞–∑–≤–∞–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –ø–ª–µ–µ—Ä–µ</p>
      </div>

      <div class="bg-purple-800/50 rounded-2xl p-8 border border-purple-700/50 shadow-xl">
        <h2 class="text-2xl font-bold mb-6 text-pink-400">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
        <div class="space-y-4">
          <div class="flex justify-between items-center bg-purple-900/50 p-4 rounded-lg border border-purple-700/50">
            <span class="text-purple-300">üëç –õ–∞–π–∫–∏</span>
            <span id="adminLikesCount" class="text-2xl font-bold text-green-400">0</span>
          </div>
          <div class="flex justify-between items-center bg-purple-900/50 p-4 rounded-lg border border-purple-700/50">
            <span class="text-purple-300">üëé –î–∏—Å–ª–∞–π–∫–∏</span>
            <span id="adminDislikesCount" class="text-2xl font-bold text-red-400">0</span>
          </div>
          <button onclick="resetStats()" class="w-full py-3 bg-purple-700 hover:bg-purple-600 rounded-lg font-bold transition mt-4 text-sm">
            –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
          </button>
        </div>
      </div>

      <div class="lg:col-span-2 bg-purple-800/50 rounded-2xl p-8 border border-purple-700/50 shadow-xl">
        <h2 class="text-2xl font-bold mb-4 text-pink-400">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
        <p class="text-purple-300 text-sm mb-4">–í—Å—Ç–∞–≤—å—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–ø—Ä–∏–º–µ—Ä: 18:00 - –ü–µ—Ä–µ–¥–∞—á–∞ 1)</p>
        <textarea id="scheduleTextarea" placeholder="18:00 - –ü–µ—Ä–µ–¥–∞—á–∞ 1&#10;20:00 - –ü–µ—Ä–µ–¥–∞—á–∞ 2&#10;22:00 - –ü–µ—Ä–µ–¥–∞—á–∞ 3" class="w-full bg-purple-900 border border-pink-500/30 rounded-lg px-4 py-4 text-white placeholder-purple-400 focus:outline-none focus:border-pink-500 transition shadow-md h-32 resize-none"></textarea>
        <button onclick="saveSchedule()" class="w-full mt-4 py-3 bg-pink-500 hover:bg-pink-600 rounded-lg font-bold transition shadow-lg text-white">
          –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
        </button>
        <div id="schedulePreview"></div>
      </div>
    </div>
  </div>

  <!-- Password Modal -->
  <div id="passwordModal" class="hide fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50">
    <div class="bg-purple-900 p-8 rounded-2xl border border-pink-500/50 shadow-2xl">
      <h2 class="text-xl font-bold mb-4 text-pink-400">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
      <input type="password" id="passwordInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" class="w-full bg-purple-800 border border-pink-500/30 rounded-lg px-4 py-3 mb-4 text-white placeholder-purple-300 focus:outline-none focus:border-pink-500 transition shadow-md">
      <div class="flex gap-2">
        <button onclick="loginAdmin()" class="flex-1 bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 px-4 py-3 rounded-lg font-bold transition shadow-lg hover:shadow-pink-500/50">
          –í—Ö–æ–¥
        </button>
        <button onclick="document.getElementById('passwordModal').classList.add('hide')" class="flex-1 bg-purple-800 hover:bg-purple-700 px-4 py-3 rounded-lg font-bold transition shadow-md">
          –û—Ç–º–µ–Ω–∞
        </button>
      </div>
    </div>
  </div>

  <script>
    const state = {
      isLive: false,
      isConnecting: false,
      isDisconnecting: false,
      isFullscreen: false,
      isAdmin: false,
      viewers: 0,
      likes: 0,
      dislikes: 0,
      userLiked: false,
      userDisliked: false,
      schedule: [],
      streamName: '–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä'
    };

    function showView(view) {
      document.getElementById('homeView').classList.toggle('hide', view !== 'home');
      document.getElementById('playerView').classList.toggle('hide', view !== 'player');
      document.getElementById('adminView').classList.toggle('hide', view !== 'admin');
    }

    // Fullscreen removed - player is always fullscreen

    function updateUI() {
      document.getElementById('connectingState').classList.toggle('hide', !state.isConnecting);
      document.getElementById('offlineState').classList.toggle('hide', !(!state.isLive && !state.isConnecting && !state.isDisconnecting && document.getElementById('offlineState').classList.contains('show')));
      document.getElementById('disconnectingState').classList.toggle('hide', !state.isDisconnecting);
      
      const showLiveState = !state.isConnecting && !state.isDisconnecting && document.getElementById('offlineState').classList.contains('hide');
      document.getElementById('liveState').classList.toggle('hide', !showLiveState);
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º iframe –∏ play button
      const iframe = document.getElementById('streamIframe');
      const playBtn = document.getElementById('playButton');
      if (state.isLive && !state.isConnecting && !state.isDisconnecting) {
        iframe.style.display = 'block';
        playBtn.style.display = 'none';
      } else {
        iframe.style.display = 'none';
        playBtn.style.display = 'flex';
      }

      if (state.isLive) {
        document.getElementById('statusDot').classList.remove('bg-gray-500');
        document.getElementById('statusDot').classList.add('bg-red-500', 'animate-pulse');
        document.getElementById('statusText').textContent = '–í –≠–§–ò–†–ï';
        document.getElementById('statusText').classList.remove('text-gray-400');
        document.getElementById('statusText').classList.add('text-red-400');
        document.getElementById('liveToggleBtn').classList.remove('bg-purple-700', 'hover:bg-purple-600', 'text-purple-300');
        document.getElementById('liveToggleBtn').classList.add('bg-red-500', 'hover:bg-red-600', 'text-white');
        document.getElementById('liveToggleBtn').textContent = 'üî¥ –û–°–¢–ê–ù–û–í–ò–¢–¨ –≠–§–ò–†';
      } else {
        document.getElementById('statusDot').classList.add('bg-gray-500');
        document.getElementById('statusDot').classList.remove('bg-red-500', 'animate-pulse');
        document.getElementById('statusText').textContent = '–í–ù–ï –≠–§–ò–†–ê';
        document.getElementById('statusText').classList.add('text-gray-400');
        document.getElementById('statusText').classList.remove('text-red-400');
        document.getElementById('liveToggleBtn').classList.add('bg-purple-700', 'hover:bg-purple-600', 'text-purple-300');
        document.getElementById('liveToggleBtn').classList.remove('bg-red-500', 'hover:bg-red-600', 'text-white');
        document.getElementById('liveToggleBtn').textContent = '‚ö™ –ó–ê–ü–£–°–¢–ò–¢–¨ –≠–§–ò–†';
      }

      document.getElementById('streamNameDisplay').textContent = state.streamName;
      document.getElementById('likeCount').textContent = state.likes;
      document.getElementById('dislikeCount').textContent = state.dislikes;
      document.getElementById('adminLikesCount').textContent = state.likes;
      document.getElementById('adminDislikesCount').textContent = state.dislikes;

      document.getElementById('likeBtn').classList.toggle('bg-green-500/80', state.userLiked);
      document.getElementById('likeBtn').classList.toggle('bg-purple-800', !state.userLiked);
      document.getElementById('dislikeBtn').classList.toggle('bg-red-500/80', state.userDisliked);
      document.getElementById('dislikeBtn').classList.toggle('bg-purple-800', !state.userDisliked);

      updateScheduleDisplay();
    }

    // Handler for play button click or space key
    function handlePlayButtonClick() {
      if (!state.isLive && !state.isConnecting && !state.isDisconnecting) {
        // Start connecting sequence
        state.isConnecting = true;
        updateUI();
        
        // After 1-2 seconds, show "–ú—ã –≤–Ω–µ —ç—Ñ–∏—Ä–∞" (Off Air)
        setTimeout(() => {
          state.isConnecting = false;
          document.getElementById('connectingState').classList.add('hide');
          document.getElementById('offlineState').classList.remove('hide');
          document.getElementById('liveState').classList.add('hide');
          document.getElementById('offlineState').classList.add('show');
          updateUI();
          
          // After 5-7 seconds, return to normal state
          const returnDelay = 5000 + Math.random() * 2000; // 5-7 seconds
          setTimeout(() => {
            document.getElementById('offlineState').classList.add('hide');
            document.getElementById('offlineState').classList.remove('show');
            document.getElementById('liveState').classList.remove('hide');
            state.isLive = false;
            updateUI();
          }, returnDelay);
        }, 1500);
      } else if (state.isLive && !state.isDisconnecting) {
        // Disconnect
        state.isDisconnecting = true;
        updateUI();
        setTimeout(() => {
          state.isLive = false;
          state.isDisconnecting = false;
          updateUI();
        }, 1500);
      }
    }

    function handleSpaceBar(e) {
      if (e.code === 'Space' && e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
        e.preventDefault();
        if (!state.isConnecting && !state.isDisconnecting) {
          handlePlayButtonClick();
        }
      }
    }

    function toggleLive() {
      if (!state.isLive) {
        state.isLive = true;
        updateUI();
      } else {
        state.isLive = false;
        updateUI();
      }
    }

    function handleLike() {
      if (state.userLiked) {
        state.userLiked = false;
        state.likes = Math.max(0, state.likes - 1);
      } else {
        state.userLiked = true;
        if (state.userDisliked) {
          state.userDisliked = false;
          state.dislikes = Math.max(0, state.dislikes - 1);
        }
        state.likes += 1;
      }
      updateUI();
    }

    function handleDislike() {
      if (state.userDisliked) {
        state.userDisliked = false;
        state.dislikes = Math.max(0, state.dislikes - 1);
      } else {
        state.userDisliked = true;
        if (state.userLiked) {
          state.userLiked = false;
          state.likes = Math.max(0, state.likes - 1);
        }
        state.dislikes += 1;
      }
      updateUI();
    }

    function parseSchedule(text) {
      const lines = text.split('\n').filter(line => line.trim());
      return lines.map(line => {
        const [time, ...rest] = line.split(' - ');
        return { time: time.trim(), name: rest.join(' - ').trim() };
      });
    }

    function updateScheduleDisplay() {
      const container = document.getElementById('scheduleContainer');
      if (state.schedule.length === 0) {
        container.innerHTML = '<p class="text-purple-400 text-xs">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ</p>';
      } else {
        container.innerHTML = state.schedule.map(item => 
          `<div class="text-xs bg-purple-800/40 p-3 rounded border border-purple-700/30 mb-2">
            <div class="font-bold text-pink-400 mb-1">${item.time}</div>
            <div class="text-purple-200 break-words text-xs">${item.name}</div>
          </div>`
        ).join('');
      }
    }

    function saveStreamName() {
      const input = document.getElementById('streamNameInput');
      state.streamName = input.value || '–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä';
      updateUI();
      alert('–ù–∞–∑–≤–∞–Ω–∏–µ —ç—Ñ–∏—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!');
    }

    function saveSchedule() {
      const textarea = document.getElementById('scheduleTextarea');
      state.schedule = parseSchedule(textarea.value);
      updateUI();
      alert('–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!');
    }

    function resetStats() {
      state.likes = 0;
      state.dislikes = 0;
      state.userLiked = false;
      state.userDisliked = false;
      updateUI();
      alert('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–±—Ä–æ—à–µ–Ω–∞!');
    }

    function openPasswordModal() {
      document.getElementById('passwordModal').classList.remove('hide');
    }

    function loginAdmin() {
      const password = document.getElementById('passwordInput').value;
      if (password === '7b06a998-72d8-458d-966') {
        state.isAdmin = true;
        document.getElementById('adminPanelBtn').classList.remove('hide');
        document.getElementById('passwordModal').classList.add('hide');
        document.getElementById('passwordInput').value = '';
        showView('admin');
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!');
      }
    }

    function adminLogout() {
      state.isAdmin = false;
      document.getElementById('adminPanelBtn').classList.add('hide');
      showView('home');
    }

    // Initialize
    document.addEventListener('keydown', handleSpaceBar);
    document.getElementById('streamNameInput').value = state.streamName;
    updateUI();
  </script>
</body>
</html>
